const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ThreeDViewer-C9YliY1w.js","assets/index-Ca9gSjIo.js","assets/index-CfWdAc1r.css","assets/types-CdcL6vzf.js"])))=>i.map(i=>d[i]);
import{c as W,r as L,j as h,X as xe,a as no,_ as to}from"./index-Ca9gSjIo.js";import{S as oo,G as fe}from"./types-CdcL6vzf.js";import{S as Re}from"./sparkles-IU-Wdf-f.js";import{B as ze}from"./box-DNp5UKzj.js";const io=W("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const so=W("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const ro=W("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);const lo=W("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const ao=W("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Xe=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const uo=W("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);const co=W("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const fo=W("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),he=[{id:"basic-white-tee",name:"Basic White Tee",category:"casual",garmentType:"T-Shirt",thumbnail:"ðŸŽ½",color:"#FFFFFF",textureUrl:null,description:"Kaos putih polos klasik - sempurna untuk daily wear atau sebagai base design",fit:"Regular",tags:["basic","versatile","essential"],popularity:95},{id:"black-essential",name:"Black Essential",category:"minimalist",garmentType:"T-Shirt",thumbnail:"â¬›",color:"#000000",textureUrl:null,description:"Kaos hitam minimalis - timeless piece untuk semua style",fit:"Regular",tags:["minimalist","timeless","versatile"],popularity:92},{id:"navy-classic",name:"Navy Classic",category:"casual",garmentType:"T-Shirt",thumbnail:"ðŸ”·",color:"#1e3a8a",textureUrl:null,description:"Kaos navy blue - professional casual look",fit:"Regular",tags:["professional","casual","versatile"],popularity:88},{id:"heather-grey",name:"Heather Grey",category:"casual",garmentType:"T-Shirt",thumbnail:"âšª",color:"#9ca3af",textureUrl:null,description:"Kaos abu-abu melange - comfortable athleisure vibe",fit:"Regular",tags:["athleisure","comfortable","relaxed"],popularity:85},{id:"oversized-black",name:"Oversized Black",category:"streetwear",garmentType:"T-Shirt",thumbnail:"ðŸ–¤",color:"#1a1a1a",textureUrl:null,description:"Kaos oversized hitam - perfect untuk streetwear aesthetic",fit:"Oversized",tags:["streetwear","oversized","urban"],popularity:90},{id:"ash-grey",name:"Ash Grey",category:"vintage",garmentType:"T-Shirt",thumbnail:"âšª",color:"#9ca3af",textureUrl:null,description:"Kaos ash grey - timeless neutral dengan vintage vibe",fit:"Regular",tags:["neutral","vintage","timeless"],popularity:82},{id:"light-grey",name:"Light Grey",category:"casual",garmentType:"T-Shirt",thumbnail:"âšª",color:"#d1d5db",textureUrl:null,description:"Kaos light grey - soft neutral untuk daily wear",fit:"Regular",tags:["neutral","versatile","modern"],popularity:87},{id:"warm-beige",name:"Warm Beige",category:"casual",garmentType:"T-Shirt",thumbnail:"ðŸ¤Ž",color:"#d4c5b0",textureUrl:null,description:"Kaos warm beige - neutral tone yang sophisticated",fit:"Slim",tags:["neutral","sophisticated","versatile"],popularity:83},{id:"charcoal-grey",name:"Charcoal Grey",category:"streetwear",garmentType:"T-Shirt",thumbnail:"â¬›",color:"#4b5563",textureUrl:null,description:"Kaos charcoal grey - versatile urban piece",fit:"Regular",tags:["neutral","urban","versatile"],popularity:78},{id:"slate-grey",name:"Slate Grey",category:"formal",garmentType:"T-Shirt",thumbnail:"â¬œ",color:"#64748b",textureUrl:null,description:"Kaos slate grey - sophisticated & professional",fit:"Slim",tags:["neutral","sophisticated","professional"],popularity:80},{id:"black-hoodie-basic",name:"Black Hoodie Essential",category:"casual",garmentType:"Hoodie",thumbnail:"ðŸ–¤",color:"#1a1a1a",textureUrl:null,description:"Hoodie hitam polos - everyday essential",fit:"Regular",tags:["hoodie","essential","comfortable"],popularity:94},{id:"grey-melange-hoodie",name:"Grey Melange Hoodie",category:"casual",garmentType:"Hoodie",thumbnail:"âšª",color:"#a8a8a8",textureUrl:null,description:"Hoodie grey melange - cozy & stylish",fit:"Regular",tags:["hoodie","cozy","casual"],popularity:89},{id:"oversized-hoodie-cream",name:"Oversized Cream Hoodie",category:"streetwear",garmentType:"Hoodie",thumbnail:"ðŸ¤",color:"#f5f5dc",textureUrl:null,description:"Hoodie oversized cream - relaxed streetwear",fit:"Oversized",tags:["hoodie","oversized","streetwear"],popularity:91},{id:"navy-athletic-hoodie",name:"Navy Athletic Hoodie",category:"sportswear",garmentType:"Hoodie",thumbnail:"ðŸ”·",color:"#1e3a8a",textureUrl:null,description:"Hoodie navy athletic - performance & style",fit:"Regular",tags:["hoodie","athletic","sportswear"],popularity:84},{id:"stone-grey-hoodie",name:"Stone Grey Hoodie",category:"casual",garmentType:"Hoodie",thumbnail:"âšª",color:"#78716c",textureUrl:null,description:"Hoodie stone grey - neutral casual aesthetic",fit:"Regular",tags:["hoodie","neutral","casual"],popularity:81},{id:"black-minimalist-dress",name:"Black Minimalist Dress",category:"minimalist",garmentType:"Dress",thumbnail:"ðŸ‘—",color:"#1a1a1a",textureUrl:null,description:"Dress hitam minimalis - elegant & versatile",fit:"Regular",tags:["dress","minimalist","elegant"],popularity:88},{id:"white-summer-dress",name:"White Summer Dress",category:"casual",garmentType:"Dress",thumbnail:"ðŸ¤",color:"#FFFFFF",textureUrl:null,description:"Dress putih summer - fresh & feminine",fit:"Regular",tags:["dress","summer","feminine"],popularity:86},{id:"taupe-dress",name:"Taupe Dress",category:"formal",garmentType:"Dress",thumbnail:"ðŸ‘—",color:"#a89f91",textureUrl:null,description:"Dress taupe - elegant & sophisticated neutral",fit:"Regular",tags:["dress","elegant","neutral"],popularity:84},{id:"navy-midi-dress",name:"Navy Midi Dress",category:"formal",garmentType:"Dress",thumbnail:"ðŸ’™",color:"#1e3a8a",textureUrl:null,description:"Dress navy midi - professional & chic",fit:"Slim",tags:["dress","professional","chic"],popularity:82},{id:"greige-dress",name:"Greige Dress",category:"vintage",garmentType:"Dress",thumbnail:"ðŸ‘—",color:"#a89f8c",textureUrl:null,description:"Dress greige (grey+beige) - neutral vintage style",fit:"Regular",tags:["dress","neutral","vintage"],popularity:79}],po=(n=6)=>he.sort((e,t)=>t.popularity-e.popularity).slice(0,n),mo=n=>{const e=n.toLowerCase();return he.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.tags.some(o=>o.toLowerCase().includes(e)))},ho=({isOpen:n,onClose:e,onSelectTemplate:t})=>{const[o,r]=L.useState("popular"),[l,a]=L.useState(""),u=[{id:"popular",name:"ðŸ”¥ Popular",icon:Xe},{id:"casual",name:"ðŸ‘• Casual"},{id:"streetwear",name:"ðŸŽ¨ Streetwear"},{id:"minimalist",name:"âšª Minimalist"},{id:"vintage",name:"ðŸ“» Vintage"},{id:"sportswear",name:"âš½ Sportswear"},{id:"formal",name:"ðŸ‘” Formal"}],d=l?mo(l):o==="popular"?po(12):he.filter(f=>f.category===o);return n?h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"p-6 border-b bg-gradient-to-r from-orange-50 to-yellow-50",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[h.jsx(Re,{className:"h-6 w-6 text-orange-600"}),"Template Library"]}),h.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Pilih dari ",he.length,"+ design siap pakai untuk mempercepat workflow Anda"]})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-white rounded-lg transition-colors",children:h.jsx(xe,{className:"h-5 w-5 text-gray-500"})})]}),h.jsxs("div",{className:"relative",children:[h.jsx(oo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Cari template berdasarkan nama, style, atau tags...",value:l,onChange:f=>a(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]})]}),h.jsx("div",{className:"flex gap-2 px-6 py-3 bg-gray-50 border-b overflow-x-auto",children:u.map(f=>h.jsx("button",{onClick:()=>{r(f.id),a("")},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${o===f.id?"bg-slate-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100"}`,children:f.name},f.id))}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜”"}),h.jsx("p",{className:"text-gray-500",children:"Tidak ada template ditemukan"}),h.jsx("button",{onClick:()=>a(""),className:"mt-4 text-slate-600 hover:text-slate-700 font-medium",children:"Reset pencarian"})]}):h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:d.map(f=>h.jsxs("div",{onClick:()=>{t(f),e()},className:"group cursor-pointer bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-slate-500 hover:shadow-lg transition-all",children:[h.jsxs("div",{className:"h-40 flex items-center justify-center text-6xl relative",style:{backgroundColor:f.color,backgroundImage:f.textureUrl?`url(${f.textureUrl})`:"none",backgroundSize:"cover"},children:[!f.textureUrl&&h.jsx("span",{className:"opacity-30",children:f.thumbnail}),f.popularity>=85&&h.jsxs("div",{className:"absolute top-2 right-2 bg-slate-600 text-white text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1",children:[h.jsx(Xe,{className:"h-3 w-3"}),f.popularity]})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("h3",{className:"font-semibold text-sm text-gray-900 mb-1 group-hover:text-slate-600 transition-colors",children:f.name}),h.jsx("p",{className:"text-xs text-gray-500 mb-2 line-clamp-2",children:f.description}),h.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:f.garmentType}),h.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:f.fit})]})]}),h.jsx("div",{className:"absolute inset-0 bg-orange-600/0 group-hover:bg-orange-600/10 transition-colors pointer-events-none"})]},f.id))})}),h.jsx("div",{className:"p-4 border-t bg-gray-50 text-center",children:h.jsxs("p",{className:"text-xs text-gray-500",children:["ðŸ’¡ ",h.jsx("strong",{children:"Pro Tip:"})," Klik template untuk langsung apply ke canvas. Anda bisa edit warna, texture, dan fit setelahnya."]})})]})}):null};let go,yo;function To(){return{geminiUrl:go,vertexUrl:yo}}function Co(n,e,t,o){var r,l;if(!n?.baseUrl){const a=To();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}class z{}function C(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const c=n[u];if(Array.isArray(t))for(let d=0;d<c.length;d++){const f=c[d];s(f,e.slice(l+1),t[d])}else for(const d of c)s(d,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const c=n[u];s(c[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function i(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const a=n[l];return Array.isArray(a)?a.map(u=>i(u,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function _o(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),a=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&l.length>u)for(let c=u;c<l.length;c++){const d=l[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}Ne(n,r,l,0,a)}}function Ne(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2),u=n;if(a in u&&Array.isArray(u[a]))for(const c of u[a])Ne(c,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const a=n,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=a[d];for(const[d,f]of Object.entries(c)){const p=[];for(const m of t.slice(o))m==="*"?p.push(d):p.push(m);s(a,p,f)}for(const d of u)delete a[d]}}else{const a=n;l in a&&Ne(a[l],e,t,o+1,r)}}function Ge(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function Eo(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);return o!=null&&s(e,["_url","resourceName"],o),e}function vo(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Io(a)),e}function So(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Ao(a)),e}function Io(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>xo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Ao(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Ro(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function xo(n){const e={},t=i(n,["video"]);return t!=null&&s(e,["video"],ko(t)),e}function Ro(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Uo(t)),e}function No(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function Po(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function Mo(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],wo(a)),e}function wo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["parent"]);o!=null&&s(e,["parent"],o);const r=i(n,["documentName"]);return r!=null&&s(e,["documentName"],r),e}function vt(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Do(a)),e}function Do(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["parent"]);o!=null&&s(e,["parent"],o);const r=i(n,["documentName"]);return r!=null&&s(e,["documentName"],r),e}function ko(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["encodedVideo"]);o!=null&&s(e,["videoBytes"],Ge(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Uo(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],Ge(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}var Qe;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qe||(Qe={}));var Ze;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Ze||(Ze={}));var Oe;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Oe||(Oe={}));var q;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(q||(q={}));var je;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(je||(je={}));var en;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(en||(en={}));var nn;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(nn||(nn={}));var tn;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(tn||(tn={}));var on;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(on||(on={}));var sn;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(sn||(sn={}));var rn;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rn||(rn={}));var ln;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ln||(ln={}));var an;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(an||(an={}));var un;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(un||(un={}));var dn;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(dn||(dn={}));var cn;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cn||(cn={}));var fn;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(fn||(fn={}));var pn;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(pn||(pn={}));var mn;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mn||(mn={}));var ge;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ge||(ge={}));var hn;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hn||(hn={}));var gn;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(gn||(gn={}));var yn;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yn||(yn={}));var Pe;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pe||(Pe={}));var Tn;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Tn||(Tn={}));var Cn;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Cn||(Cn={}));var _n;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(_n||(_n={}));var En;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(En||(En={}));var vn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(vn||(vn={}));var Sn;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sn||(Sn={}));var In;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(In||(In={}));var An;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(An||(An={}));var xn;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(xn||(xn={}));var Rn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Rn||(Rn={}));var Nn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Nn||(Nn={}));var Pn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Pn||(Pn={}));var Mn;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mn||(Mn={}));var wn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(wn||(wn={}));var Dn;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Dn||(Dn={}));var kn;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(kn||(kn={}));var Un;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Un||(Un={}));var Ln;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Ln||(Ln={}));var Fn;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Fn||(Fn={}));var Gn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Gn||(Gn={}));var Vn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Vn||(Vn={}));var qn;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(qn||(qn={}));var bn;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bn||(bn={}));var Hn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Hn||(Hn={}));var Bn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Bn||(Bn={}));var Jn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Jn||(Jn={}));var $n;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})($n||($n={}));var Kn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Kn||(Kn={}));var Yn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yn||(Yn={}));var Wn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Wn||(Wn={}));var O;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(O||(O={}));class Me{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ae{get text(){var e,t,o,r,l,a,u,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const m of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,y]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,d+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,t,o,r,l,a,u,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,o,r,l,a,u,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,t,o,r,l,a,u,c,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,o,r,l,a,u,c,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}}class zn{}class Xn{}class Lo{}class Fo{}class Go{}class Vo{}class Qn{}class Zn{}class On{}class qo{}class ye{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new ye;let r;const l=e;return t?r=So(l):r=vo(l),Object.assign(o,r),o}}class jn{}class et{}class nt{}class bo{}class Ho{}class Bo{}class Ve{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Ve,l=Mo(e);return Object.assign(o,l),o}}class Jo{}class $o{}class Ko{}class tt{}class Yo{get text(){var e,t,o;let r="",l=!1;const a=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(a))u!=="inlineData"&&c!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Wo{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class qe{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new qe,l=vt(e);return Object.assign(o,l),o}}function M(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function St(n,e){const t=M(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function It(n){return Array.isArray(n)?n.map(e=>Te(e)):[Te(n)]}function Te(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function At(n){const e=Te(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xt(n){const e=Te(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ot(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Rt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ot(e)):[ot(n)]}function we(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function it(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function st(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function b(n){if(n==null)throw new Error("ContentUnion is required");return we(n)?n:{role:"user",parts:Rt(n)}}function be(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=b(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=b(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>b(t)):[b(e)]}function J(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(it(n)||st(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[b(n)]}const e=[],t=[],o=we(n[0]);for(const r of n){const l=we(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(it(r)||st(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:Rt(t)}),e}function zo(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(q).includes(t[0].toUpperCase())?t[0].toUpperCase():q.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(q).includes(o.toUpperCase())?o.toUpperCase():q.TYPE_UNSPECIFIED})}}function j(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&zo(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(q).includes(u.toUpperCase())?u.toUpperCase():q.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=j(u);else if(o.includes(a)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(j(d))}e[a]=c}else if(r.includes(a)){const c={};for(const[d,f]of Object.entries(u))c[d]=j(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=u}return e}function He(n){return j(n)}function Be(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Je(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function oe(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=j(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=j(e.response));return n}function ie(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Xo(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function X(n,e){if(typeof e!="string")throw new Error("name must be a string");return Xo(n,e,"cachedContents")}function Nt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Q(n){return Ge(n)}function Qo(n){return n!=null&&typeof n=="object"&&"name"in n}function Zo(n){return n!=null&&typeof n=="object"&&"video"in n}function Oo(n){return n!=null&&typeof n=="object"&&"uri"in n}function Pt(n){var e;let t;if(Qo(n)&&(t=n.name),!(Oo(n)&&(t=n.uri,t===void 0))&&!(Zo(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Mt(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function wt(n){for(const e of["models","tunedModels","publisherModels"])if(jo(n,e))return n[e];return[]}function jo(n,e){return n!==null&&typeof n=="object"&&e in n}function ei(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function ni(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=ei(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function Dt(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function ti(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kt(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function se(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Ut(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function oi(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Gi(a))),s(e,["inlinedResponses"],l)}const r=i(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["inlinedEmbedContentResponses"],l)}return e}function ii(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function si(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pe(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],Ut(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=i(n,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const c=i(n,["metadata","model"]);c!=null&&s(e,["model"],c);const d=i(n,["metadata","output"]);return d!=null&&s(e,["dest"],oi(kt(d))),e}function De(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Ut(r));const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(e,["startTime"],u);const c=i(n,["endTime"]);c!=null&&s(e,["endTime"],c);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const f=i(n,["model"]);f!=null&&s(e,["model"],f);const p=i(n,["inputConfig"]);p!=null&&s(e,["src"],ri(p));const m=i(n,["outputConfig"]);m!=null&&s(e,["dest"],ii(kt(m)));const g=i(n,["completionStats"]);return g!=null&&s(e,["completionStats"],g),e}function ri(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function li(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Fi(n,a))),s(t,["requests","requests"],l)}return t}function ai(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ui(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function di(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],se(n,o)),t}function ci(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],se(n,o)),t}function fi(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],t);const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],pi(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["avgLogprobs"]);a!=null&&s(e,["avgLogprobs"],a);const u=i(n,["groundingMetadata"]);u!=null&&s(e,["groundingMetadata"],u);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const f=i(n,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),s(e,["safetyRatings"],m)}const p=i(n,["urlContextMetadata"]);return p!=null&&s(e,["urlContextMetadata"],p),e}function pi(n){const e={},t=i(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),s(e,["citations"],o)}return e}function Lt(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>$i(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function mi(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function hi(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],si(ti(r))),t}function rt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],li(n,Dt(n,r)));const l=i(e,["config"]);return l!=null&&mi(l,t),t}function gi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],M(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],ai(Dt(n,r)));const l=i(e,["config"]);return l!=null&&hi(l,t),t}function yi(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["batch","displayName"],o),t}function Ti(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],Ai(n,r));const l=i(e,["config"]);return l!=null&&yi(l,t),t}function Ci(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],se(n,o)),t}function _i(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],se(n,o)),t}function Ei(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],l),e}function vi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],l),e}function Si(n,e){const t={},o=i(e,["contents"]);if(o!=null){let l=be(n,o);Array.isArray(l)&&(l=l.map(a=>a)),s(t,["requests[]","request","content"],l)}const r=i(e,["config"]);return r!=null&&(s(t,["_self"],Ii(r,t)),_o(t,{"requests[].*":"requests[].request.*"})),t}function Ii(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Ai(n,e){const t={},o=i(e,["fileName"]);o!=null&&s(t,["file_name"],o);const r=i(e,["inlinedRequests"]);return r!=null&&s(t,["requests"],Si(n,r)),t}function xi(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ri(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ni(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);if(o!=null&&s(e,["allowedFunctionNames"],o),i(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Pi(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Lt(b(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const v=i(e,["responseMimeType"]);v!=null&&s(o,["responseMimeType"],v);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],He(S));const E=i(e,["responseJsonSchema"]);if(E!=null&&s(o,["responseJsonSchema"],E),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=i(e,["safetySettings"]);if(t!==void 0&&_!=null){let k=_;Array.isArray(k)&&(k=k.map(H=>Ki(H))),s(t,["safetySettings"],k)}const x=i(e,["tools"]);if(t!==void 0&&x!=null){let k=ie(x);Array.isArray(k)&&(k=k.map(H=>Wi(oe(H)))),s(t,["tools"],k)}const R=i(e,["toolConfig"]);if(t!==void 0&&R!=null&&s(t,["toolConfig"],Yi(R)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=i(e,["cachedContent"]);t!==void 0&&N!=null&&s(t,["cachedContent"],X(n,N));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const G=i(e,["mediaResolution"]);G!=null&&s(o,["mediaResolution"],G);const A=i(e,["speechConfig"]);if(A!=null&&s(o,["speechConfig"],Be(A)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=i(e,["thinkingConfig"]);w!=null&&s(o,["thinkingConfig"],w);const F=i(e,["imageConfig"]);return F!=null&&s(o,["imageConfig"],Li(F)),o}function Mi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>fi(d))),s(e,["candidates"],c)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function wi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],se(n,o)),t}function Di(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],se(n,o)),t}function ki(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function Ui(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function Li(n){const e={},t=i(n,["aspectRatio"]);t!=null&&s(e,["aspectRatio"],t);const o=i(n,["imageSize"]);if(o!=null&&s(e,["imageSize"],o),i(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Fi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let u=J(r);Array.isArray(u)&&(u=u.map(c=>Lt(c))),s(t,["request","contents"],u)}const l=i(e,["metadata"]);l!=null&&s(t,["metadata"],l);const a=i(e,["config"]);return a!=null&&s(t,["request","generationConfig"],Pi(n,a,i(t,["request"],{}))),t}function Gi(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],Mi(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],o),e}function Vi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function qi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function bi(n){const e={},t=i(n,["config"]);return t!=null&&Vi(t,e),e}function Hi(n){const e={},t=i(n,["config"]);return t!=null&&qi(t,e),e}function Bi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>pe(a))),s(e,["batchJobs"],l)}return e}function Ji(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>De(a))),s(e,["batchJobs"],l)}return e}function $i(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],xi(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],Ri(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],ui(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function Ki(n){const e={},t=i(n,["category"]);if(t!=null&&s(e,["category"],t),i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function Yi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Ni(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],o),e}function Wi(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],ki(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],Ui(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}var Y;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Y||(Y={}));class Z{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class zi extends z{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Z(Y.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=rt(this.apiClient,e),o=t._url,r=C("{model}:batchGenerateContent",o),u=t.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}d.push(p)}return u.requests=d,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(a)o.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=gi(this.apiClient,e);return u=C("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}else{const d=rt(this.apiClient,e);return u=C("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>pe(f))}}async createEmbeddingsInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ti(this.apiClient,e);return l=C("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>pe(c))}}async get(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Di(this.apiClient,e);return u=C("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}else{const d=wi(this.apiClient,e);return u=C("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>pe(f))}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const c=ci(this.apiClient,e);a=C("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=di(this.apiClient,e);a=C("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Hi(e);return u=C("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ji(f),m=new tt;return Object.assign(m,p),m})}else{const d=bi(e);return u=C("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Bi(f),m=new tt;return Object.assign(m,p),m})}}async delete(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=_i(this.apiClient,e);return u=C("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>vi(f))}else{const d=Ci(this.apiClient,e);return u=C("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Ei(f))}}}function Xi(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function lt(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ts(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Qi(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let f=J(a);Array.isArray(f)&&(f=f.map(p=>lt(p))),s(e,["contents"],f)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],lt(b(u)));const c=i(n,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>_s(p))),s(e,["tools"],f)}const d=i(n,["toolConfig"]);if(e!==void 0&&d!=null&&s(e,["toolConfig"],Cs(d)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Zi(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=J(a);Array.isArray(p)&&(p=p.map(m=>m)),s(e,["contents"],p)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],b(u));const c=i(n,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Es(m))),s(e,["tools"],p)}const d=i(n,["toolConfig"]);e!==void 0&&d!=null&&s(e,["toolConfig"],d);const f=i(n,["kmsKeyName"]);return e!==void 0&&f!=null&&s(e,["encryption_spec","kmsKeyName"],f),t}function Oi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],St(n,o));const r=i(e,["config"]);return r!=null&&Qi(r,t),t}function ji(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],St(n,o));const r=i(e,["config"]);return r!=null&&Zi(r,t),t}function es(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],X(n,o)),t}function ns(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],X(n,o)),t}function ts(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function os(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function is(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ss(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);if(o!=null&&s(e,["allowedFunctionNames"],o),i(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ls(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function as(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],X(n,o)),t}function us(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],X(n,o)),t}function ds(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function cs(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function fs(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ps(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ms(n){const e={},t=i(n,["config"]);return t!=null&&fs(t,e),e}function hs(n){const e={},t=i(n,["config"]);return t!=null&&ps(t,e),e}function gs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["cachedContents"],l)}return e}function ys(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["cachedContents"],l)}return e}function Ts(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],is(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],ss(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],Xi(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function Cs(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],rs(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],o),e}function _s(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],ds(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],cs(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function Es(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>ls(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearchRetrieval"]);r!=null&&s(e,["googleSearchRetrieval"],r);const l=i(n,["computerUse"]);if(l!=null&&s(e,["computerUse"],l),i(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=i(n,["enterpriseWebSearch"]);u!=null&&s(e,["enterpriseWebSearch"],u);const c=i(n,["googleMaps"]);c!=null&&s(e,["googleMaps"],c);const d=i(n,["googleSearch"]);d!=null&&s(e,["googleSearch"],d);const f=i(n,["urlContext"]);return f!=null&&s(e,["urlContext"],f),e}function vs(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Ss(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Is(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],X(n,o));const r=i(e,["config"]);return r!=null&&vs(r,t),t}function As(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],X(n,o));const r=i(e,["config"]);return r!=null&&Ss(r,t),t}class xs extends z{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Z(Y.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ji(this.apiClient,e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=Oi(this.apiClient,e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=us(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=as(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ns(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=os(f),m=new et;return Object.assign(m,p),m})}else{const d=es(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ts(f),m=new et;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=As(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=Is(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=hs(e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ys(f),m=new nt;return Object.assign(m,p),m})}else{const d=ms(e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=gs(f),m=new nt;return Object.assign(m,p),m})}}}function at(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(n){return this instanceof U?(this.v=n,this):new U(n)}function ee(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(y){return Promise.resolve(y).then(g,p)}}function u(g,y){o[g]&&(r[g]=function(T){return new Promise(function(v,S){l.push([g,T,v,S])>1||c(g,T)})},y&&(r[g]=y(r[g])))}function c(g,y){try{d(o[g](y))}catch(T){m(l[0][3],T)}}function d(g){g.value instanceof U?Promise.resolve(g.value.v).then(f,p):m(l[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function m(g,y){g(y),l.shift(),l.length&&c(l[0][0],l[0][1])}}function ue(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof at=="function"?at(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(u,c){a=n[l](a),r(u,c,a.done,a.value)})}}function r(l,a,u,c){Promise.resolve(c).then(function(d){l({value:d,done:u})},a)}}function Rs(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Ft(t)}function Ft(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ns(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ut(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!Ft(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Ps{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Ms(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ms{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Ns(l)}async sendMessage(e){var t;await this.sendPromise;const o=b(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const c=await r,d=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=b(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?ut(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return ee(this,arguments,function*(){var a,u,c,d;const f=[];try{for(var p=!0,m=ue(e),g;g=yield U(m.next()),a=g.done,!a;p=!0){d=g.value,p=!1;const y=d;if(Rs(y)){const T=(r=(o=y.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;T!==void 0&&f.push(T)}yield yield U(y)}}catch(y){u={error:y}}finally{try{!p&&!a&&(c=m.return)&&(yield U(c.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ut(o)):this.history.push(e),this.history.push(...r)}}class _e extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_e.prototype)}}function ws(n){const e={},t=i(n,["file"]);return t!=null&&s(e,["file"],t),e}function Ds(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function ks(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],Pt(t)),e}function Us(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Ls(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],Pt(t)),e}function Fs(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Gs(n){const e={},t=i(n,["config"]);return t!=null&&Fs(t,e),e}function Vs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["files"],l)}return e}class qs extends z{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Z(Y.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gs(e);return l=C("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Vs(c),f=new Jo;return Object.assign(f,d),f})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ws(e);return l=C("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Ds(c),f=new $o;return Object.assign(f,d),f})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ls(e);return l=C("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ks(e);return l=C("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Us(c),f=new Ko;return Object.assign(f,d),f})}}}function me(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function bs(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>tr(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Hs(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Bs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Js(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function $s(n){const e={},t=i(n,["modelSelectionConfig"]);t!=null&&s(e,["modelConfig"],t);const o=i(n,["responseJsonSchema"]);o!=null&&s(e,["responseJsonSchema"],o);const r=i(n,["audioTimestamp"]);r!=null&&s(e,["audioTimestamp"],r);const l=i(n,["candidateCount"]);l!=null&&s(e,["candidateCount"],l);const a=i(n,["enableAffectiveDialog"]);a!=null&&s(e,["enableAffectiveDialog"],a);const u=i(n,["frequencyPenalty"]);u!=null&&s(e,["frequencyPenalty"],u);const c=i(n,["logprobs"]);c!=null&&s(e,["logprobs"],c);const d=i(n,["maxOutputTokens"]);d!=null&&s(e,["maxOutputTokens"],d);const f=i(n,["mediaResolution"]);f!=null&&s(e,["mediaResolution"],f);const p=i(n,["presencePenalty"]);p!=null&&s(e,["presencePenalty"],p);const m=i(n,["responseLogprobs"]);m!=null&&s(e,["responseLogprobs"],m);const g=i(n,["responseMimeType"]);g!=null&&s(e,["responseMimeType"],g);const y=i(n,["responseModalities"]);y!=null&&s(e,["responseModalities"],y);const T=i(n,["responseSchema"]);T!=null&&s(e,["responseSchema"],T);const v=i(n,["routingConfig"]);v!=null&&s(e,["routingConfig"],v);const S=i(n,["seed"]);S!=null&&s(e,["seed"],S);const E=i(n,["speechConfig"]);E!=null&&s(e,["speechConfig"],Gt(E));const _=i(n,["stopSequences"]);_!=null&&s(e,["stopSequences"],_);const x=i(n,["temperature"]);x!=null&&s(e,["temperature"],x);const R=i(n,["thinkingConfig"]);R!=null&&s(e,["thinkingConfig"],R);const N=i(n,["topK"]);N!=null&&s(e,["topK"],N);const P=i(n,["topP"]);if(P!=null&&s(e,["topP"],P),i(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ks(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function Ys(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function Ws(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Je(p));const m=i(n,["thinkingConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","thinkingConfig"],m);const g=i(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=i(n,["systemInstruction"]);e!==void 0&&y!=null&&s(e,["setup","systemInstruction"],bs(b(y)));const T=i(n,["tools"]);if(e!==void 0&&T!=null){let N=ie(T);Array.isArray(N)&&(N=N.map(P=>ir(oe(P)))),s(e,["setup","tools"],N)}const v=i(n,["sessionResumption"]);e!==void 0&&v!=null&&s(e,["setup","sessionResumption"],or(v));const S=i(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","inputAudioTranscription"],S);const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],E);const _=i(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&s(e,["setup","realtimeInputConfig"],_);const x=i(n,["contextWindowCompression"]);e!==void 0&&x!=null&&s(e,["setup","contextWindowCompression"],x);const R=i(n,["proactivity"]);return e!==void 0&&R!=null&&s(e,["setup","proactivity"],R),t}function zs(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],$s(o));const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Gt(Je(p)));const m=i(n,["thinkingConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","thinkingConfig"],m);const g=i(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=i(n,["systemInstruction"]);e!==void 0&&y!=null&&s(e,["setup","systemInstruction"],b(y));const T=i(n,["tools"]);if(e!==void 0&&T!=null){let N=ie(T);Array.isArray(N)&&(N=N.map(P=>sr(oe(P)))),s(e,["setup","tools"],N)}const v=i(n,["sessionResumption"]);e!==void 0&&v!=null&&s(e,["setup","sessionResumption"],v);const S=i(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","inputAudioTranscription"],S);const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],E);const _=i(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&s(e,["setup","realtimeInputConfig"],_);const x=i(n,["contextWindowCompression"]);e!==void 0&&x!=null&&s(e,["setup","contextWindowCompression"],x);const R=i(n,["proactivity"]);return e!==void 0&&R!=null&&s(e,["setup","proactivity"],R),t}function Xs(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],M(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ws(r,t)),t}function Qs(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],M(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],zs(r,t)),t}function Zs(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],t),e}function Os(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),s(e,["weightedPrompts"],o)}return e}function js(n){const e={},t=i(n,["media"]);if(t!=null){let d=It(t);Array.isArray(d)&&(d=d.map(f=>me(f))),s(e,["mediaChunks"],d)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],me(xt(o)));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],me(At(l)));const a=i(n,["text"]);a!=null&&s(e,["text"],a);const u=i(n,["activityStart"]);u!=null&&s(e,["activityStart"],u);const c=i(n,["activityEnd"]);return c!=null&&s(e,["activityEnd"],c),e}function er(n){const e={},t=i(n,["media"]);if(t!=null){let d=It(t);Array.isArray(d)&&(d=d.map(f=>f)),s(e,["mediaChunks"],d)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],xt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],At(l));const a=i(n,["text"]);a!=null&&s(e,["text"],a);const u=i(n,["activityStart"]);u!=null&&s(e,["activityStart"],u);const c=i(n,["activityEnd"]);return c!=null&&s(e,["activityEnd"],c),e}function nr(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],t);const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],o);const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],r);const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],l);const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],rr(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],u);const c=i(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],c),e}function tr(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Hs(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],Bs(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],me(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function or(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Gt(n){const e={},t=i(n,["languageCode"]);t!=null&&s(e,["languageCode"],t);const o=i(n,["voiceConfig"]);if(o!=null&&s(e,["voiceConfig"],o),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ir(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Ks(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],Ys(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function sr(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Js(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearchRetrieval"]);r!=null&&s(e,["googleSearchRetrieval"],r);const l=i(n,["computerUse"]);if(l!=null&&s(e,["computerUse"],l),i(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=i(n,["enterpriseWebSearch"]);u!=null&&s(e,["enterpriseWebSearch"],u);const c=i(n,["googleMaps"]);c!=null&&s(e,["googleMaps"],c);const d=i(n,["googleSearch"]);d!=null&&s(e,["googleSearch"],d);const f=i(n,["urlContext"]);return f!=null&&s(e,["urlContext"],f),e}function rr(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const c=i(n,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),s(e,["promptTokensDetails"],g)}const d=i(n,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),s(e,["cacheTokensDetails"],g)}const f=i(n,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),s(e,["responseTokensDetails"],g)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>y)),s(e,["toolUsePromptTokensDetails"],g)}const m=i(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function lr(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ar(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],t);const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],ur(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["avgLogprobs"]);a!=null&&s(e,["avgLogprobs"],a);const u=i(n,["groundingMetadata"]);u!=null&&s(e,["groundingMetadata"],u);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const f=i(n,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),s(e,["safetyRatings"],m)}const p=i(n,["urlContextMetadata"]);return p!=null&&s(e,["urlContextMetadata"],p),e}function ur(n){const e={},t=i(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),s(e,["citations"],o)}return e}function dr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let l=J(r);Array.isArray(l)&&(l=l.map(a=>a)),s(t,["contents"],l)}return t}function cr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),s(e,["tokensInfo"],r)}return e}function fr(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],pr(o)),e}function pr(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function Ee(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>vl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function mr(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function hr(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gr(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],b(o));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Bt(u))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],ll(l)),t}function yr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=J(r);Array.isArray(a)&&(a=a.map(u=>Ee(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&hr(l),t}function Tr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=J(r);Array.isArray(a)&&(a=a.map(u=>u)),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&gr(l,t),t}function Cr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function _r(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function Er(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function vr(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function Sr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Ir(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Ar(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const T=i(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&s(e,["parameters","outputOptions","compressionQuality"],T);const v=i(n,["addWatermark"]);e!==void 0&&v!=null&&s(e,["parameters","addWatermark"],v);const S=i(n,["labels"]);e!==void 0&&S!=null&&s(e,["labels"],S);const E=i(n,["editMode"]);e!==void 0&&E!=null&&s(e,["parameters","editMode"],E);const _=i(n,["baseSteps"]);return e!==void 0&&_!=null&&s(e,["parameters","editConfig","baseSteps"],_),t}function xr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>Nl(c))),s(t,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&Ar(a,t),t}function Rr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ve(l))),s(e,["generatedImages"],r)}return e}function Nr(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Pr(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(n,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),t}function Mr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let u=be(n,r);Array.isArray(u)&&(u=u.map(c=>c)),s(t,["requests[]","content"],u)}const l=i(e,["config"]);l!=null&&Nr(l,t);const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],M(n,a)),t}function wr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=be(n,r);Array.isArray(a)&&(a=a.map(u=>u)),s(t,["instances[]","content"],a)}const l=i(e,["config"]);return l!=null&&Pr(l,t),t}function Dr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],r),e}function kr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>fr(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],r),e}function Ur(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function Lr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Fr(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);if(o!=null&&s(e,["allowedFunctionNames"],o),i(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Vr(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function qr(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ee(b(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const v=i(e,["responseMimeType"]);v!=null&&s(o,["responseMimeType"],v);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],He(S));const E=i(e,["responseJsonSchema"]);if(E!=null&&s(o,["responseJsonSchema"],E),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=i(e,["safetySettings"]);if(t!==void 0&&_!=null){let k=_;Array.isArray(k)&&(k=k.map(H=>Pl(H))),s(t,["safetySettings"],k)}const x=i(e,["tools"]);if(t!==void 0&&x!=null){let k=ie(x);Array.isArray(k)&&(k=k.map(H=>Fl(oe(H)))),s(t,["tools"],k)}const R=i(e,["toolConfig"]);if(t!==void 0&&R!=null&&s(t,["toolConfig"],Ll(R)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=i(e,["cachedContent"]);t!==void 0&&N!=null&&s(t,["cachedContent"],X(n,N));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const G=i(e,["mediaResolution"]);G!=null&&s(o,["mediaResolution"],G);const A=i(e,["speechConfig"]);if(A!=null&&s(o,["speechConfig"],Be(A)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=i(e,["thinkingConfig"]);w!=null&&s(o,["thinkingConfig"],w);const F=i(e,["imageConfig"]);return F!=null&&s(o,["imageConfig"],fl(F)),o}function br(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],b(r));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const v=i(e,["responseMimeType"]);v!=null&&s(o,["responseMimeType"],v);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],He(S));const E=i(e,["responseJsonSchema"]);E!=null&&s(o,["responseJsonSchema"],E);const _=i(e,["routingConfig"]);_!=null&&s(o,["routingConfig"],_);const x=i(e,["modelSelectionConfig"]);x!=null&&s(o,["modelConfig"],x);const R=i(e,["safetySettings"]);if(t!==void 0&&R!=null){let B=R;Array.isArray(B)&&(B=B.map(le=>le)),s(t,["safetySettings"],B)}const N=i(e,["tools"]);if(t!==void 0&&N!=null){let B=ie(N);Array.isArray(B)&&(B=B.map(le=>Bt(oe(le)))),s(t,["tools"],B)}const P=i(e,["toolConfig"]);t!==void 0&&P!=null&&s(t,["toolConfig"],P);const G=i(e,["labels"]);t!==void 0&&G!=null&&s(t,["labels"],G);const A=i(e,["cachedContent"]);t!==void 0&&A!=null&&s(t,["cachedContent"],X(n,A));const w=i(e,["responseModalities"]);w!=null&&s(o,["responseModalities"],w);const F=i(e,["mediaResolution"]);F!=null&&s(o,["mediaResolution"],F);const k=i(e,["speechConfig"]);k!=null&&s(o,["speechConfig"],Ht(Be(k)));const H=i(e,["audioTimestamp"]);H!=null&&s(o,["audioTimestamp"],H);const re=i(e,["thinkingConfig"]);re!=null&&s(o,["thinkingConfig"],re);const de=i(e,["imageConfig"]);return de!=null&&s(o,["imageConfig"],pl(de)),o}function dt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=J(r);Array.isArray(a)&&(a=a.map(u=>Ee(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],qr(n,l,t)),t}function ct(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=J(r);Array.isArray(a)&&(a=a.map(u=>u)),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],br(n,l,t)),t}function ft(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>ar(d))),s(e,["candidates"],c)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function pt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),s(e,["candidates"],d)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(n,["responseId"]);u!=null&&s(e,["responseId"],u);const c=i(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Hr(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(n,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const c=i(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const d=i(n,["includeRaiReason"]);e!==void 0&&d!=null&&s(e,["parameters","includeRaiReason"],d);const f=i(n,["language"]);e!==void 0&&f!=null&&s(e,["parameters","language"],f);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=i(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Br(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const T=i(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&s(e,["parameters","outputOptions","compressionQuality"],T);const v=i(n,["addWatermark"]);e!==void 0&&v!=null&&s(e,["parameters","addWatermark"],v);const S=i(n,["labels"]);e!==void 0&&S!=null&&s(e,["labels"],S);const E=i(n,["imageSize"]);e!==void 0&&E!=null&&s(e,["parameters","sampleImageSize"],E);const _=i(n,["enhancePrompt"]);return e!==void 0&&_!=null&&s(e,["parameters","enhancePrompt"],_),t}function Jr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&Hr(l,t),t}function $r(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&Br(l,t),t}function Kr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ol(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],qt(r)),e}function Yr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ve(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],bt(r)),e}function Wr(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["resolution"]);e!==void 0&&a!=null&&s(e,["parameters","resolution"],a);const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(n,["negativePrompt"]);e!==void 0&&c!=null&&s(e,["parameters","negativePrompt"],c);const d=i(n,["enhancePrompt"]);if(e!==void 0&&d!=null&&s(e,["parameters","enhancePrompt"],d),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(n,["lastFrame"]);e!==void 0&&f!=null&&s(e,["instances[0]","lastFrame"],Se(f));const p=i(n,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>Xl(g))),s(e,["instances[0]","referenceImages"],m)}if(i(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function zr(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const c=i(n,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const d=i(n,["resolution"]);e!==void 0&&d!=null&&s(e,["parameters","resolution"],d);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=i(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const y=i(n,["generateAudio"]);e!==void 0&&y!=null&&s(e,["parameters","generateAudio"],y);const T=i(n,["lastFrame"]);e!==void 0&&T!=null&&s(e,["instances[0]","lastFrame"],$(T));const v=i(n,["referenceImages"]);if(e!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(x=>Ql(x))),s(e,["instances[0]","referenceImages"],_)}const S=i(n,["mask"]);e!==void 0&&S!=null&&s(e,["instances[0]","mask"],zl(S));const E=i(n,["compressionQuality"]);return e!==void 0&&E!=null&&s(e,["parameters","compressionQuality"],E),t}function Xr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],jr(a)),e}function Qr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],el(a)),e}function Zr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],Se(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],Jt(a));const u=i(e,["source"]);u!=null&&nl(u,t);const c=i(e,["config"]);return c!=null&&Wr(c,t),t}function Or(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],$(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],$t(a));const u=i(e,["source"]);u!=null&&tl(u,t);const c=i(e,["config"]);return c!=null&&zr(c,t),t}function jr(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>sl(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function el(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>rl(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function nl(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],Se(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],Jt(l)),t}function tl(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],$(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],$t(l)),t}function ol(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],ml(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],qt(r)),e}function ve(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Vt(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],bt(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function il(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["mask"],Vt(t));const o=i(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),s(e,["labels"],r)}return e}function sl(n){const e={},t=i(n,["video"]);return t!=null&&s(e,["video"],Yl(t)),e}function rl(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Wl(t)),e}function ll(n){const e={},t=i(n,["modelSelectionConfig"]);t!=null&&s(e,["modelConfig"],t);const o=i(n,["responseJsonSchema"]);o!=null&&s(e,["responseJsonSchema"],o);const r=i(n,["audioTimestamp"]);r!=null&&s(e,["audioTimestamp"],r);const l=i(n,["candidateCount"]);l!=null&&s(e,["candidateCount"],l);const a=i(n,["enableAffectiveDialog"]);a!=null&&s(e,["enableAffectiveDialog"],a);const u=i(n,["frequencyPenalty"]);u!=null&&s(e,["frequencyPenalty"],u);const c=i(n,["logprobs"]);c!=null&&s(e,["logprobs"],c);const d=i(n,["maxOutputTokens"]);d!=null&&s(e,["maxOutputTokens"],d);const f=i(n,["mediaResolution"]);f!=null&&s(e,["mediaResolution"],f);const p=i(n,["presencePenalty"]);p!=null&&s(e,["presencePenalty"],p);const m=i(n,["responseLogprobs"]);m!=null&&s(e,["responseLogprobs"],m);const g=i(n,["responseMimeType"]);g!=null&&s(e,["responseMimeType"],g);const y=i(n,["responseModalities"]);y!=null&&s(e,["responseModalities"],y);const T=i(n,["responseSchema"]);T!=null&&s(e,["responseSchema"],T);const v=i(n,["routingConfig"]);v!=null&&s(e,["routingConfig"],v);const S=i(n,["seed"]);S!=null&&s(e,["seed"],S);const E=i(n,["speechConfig"]);E!=null&&s(e,["speechConfig"],Ht(E));const _=i(n,["stopSequences"]);_!=null&&s(e,["stopSequences"],_);const x=i(n,["temperature"]);x!=null&&s(e,["temperature"],x);const R=i(n,["thinkingConfig"]);R!=null&&s(e,["thinkingConfig"],R);const N=i(n,["topK"]);N!=null&&s(e,["topK"],N);const P=i(n,["topP"]);if(P!=null&&s(e,["topP"],P),i(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function al(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function ul(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function dl(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function cl(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function fl(n){const e={},t=i(n,["aspectRatio"]);t!=null&&s(e,["aspectRatio"],t);const o=i(n,["imageSize"]);if(o!=null&&s(e,["imageSize"],o),i(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function pl(n){const e={},t=i(n,["aspectRatio"]);t!=null&&s(e,["aspectRatio"],t);const o=i(n,["imageSize"]);o!=null&&s(e,["imageSize"],o);const r=i(n,["outputMimeType"]);r!=null&&s(e,["imageOutputOptions","mimeType"],r);const l=i(n,["outputCompressionQuality"]);return l!=null&&s(e,["imageOutputOptions","compressionQuality"],l),e}function ml(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],Q(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Vt(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],Q(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Se(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],Q(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function $(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],Q(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function hl(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Mt(n,u)),o}function gl(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Mt(n,u)),o}function yl(n,e){const t={},o=i(e,["config"]);return o!=null&&hl(n,o,t),t}function Tl(n,e){const t={},o=i(e,["config"]);return o!=null&&gl(n,o,t),t}function Cl(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=wt(r);Array.isArray(l)&&(l=l.map(a=>ke(a))),s(e,["models"],l)}return e}function _l(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=wt(r);Array.isArray(l)&&(l=l.map(a=>Ue(a))),s(e,["models"],l)}return e}function El(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function ke(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],Gl(a));const u=i(n,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const c=i(n,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const d=i(n,["supportedGenerationMethods"]);d!=null&&s(e,["supportedActions"],d);const f=i(n,["temperature"]);f!=null&&s(e,["temperature"],f);const p=i(n,["maxTemperature"]);p!=null&&s(e,["maxTemperature"],p);const m=i(n,["topP"]);m!=null&&s(e,["topP"],m);const g=i(n,["topK"]);g!=null&&s(e,["topK"],g);const y=i(n,["thinking"]);return y!=null&&s(e,["thinking"],y),e}function Ue(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Ur(m))),s(e,["endpoints"],p)}const u=i(n,["labels"]);u!=null&&s(e,["labels"],u);const c=i(n,["_self"]);c!=null&&s(e,["tunedModelInfo"],Vl(c));const d=i(n,["defaultCheckpointId"]);d!=null&&s(e,["defaultCheckpointId"],d);const f=i(n,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),s(e,["checkpoints"],p)}return e}function vl(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Lr(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],Fr(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],lr(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function Sl(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],$(t)),e}function Il(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const d=i(n,["addWatermark"]);e!==void 0&&d!=null&&s(e,["parameters","addWatermark"],d);const f=i(n,["outputMimeType"]);e!==void 0&&f!=null&&s(e,["parameters","outputOptions","mimeType"],f);const p=i(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","compressionQuality"],p);const m=i(n,["enhancePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","enhancePrompt"],m);const g=i(n,["labels"]);return e!==void 0&&g!=null&&s(e,["labels"],g),t}function Al(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["source"]);r!=null&&Rl(r,t);const l=i(e,["config"]);return l!=null&&Il(l,t),t}function xl(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ve(r))),s(e,["generatedImages"],o)}return e}function Rl(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],$(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Sl(u))),s(e,["instances[0]","productImages"],a)}return t}function Nl(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],$(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],El(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],mr(a));const u=i(n,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],u);const c=i(n,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],c),e}function qt(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function bt(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Pl(n){const e={},t=i(n,["category"]);if(t!=null&&s(e,["category"],t),i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function Ml(n){const e={},t=i(n,["image"]);return t!=null&&s(e,["image"],$(t)),e}function wl(n,e){const t={},o=i(n,["mode"]);e!==void 0&&o!=null&&s(e,["parameters","mode"],o);const r=i(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=i(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=i(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const u=i(n,["binaryColorThreshold"]);e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u);const c=i(n,["labels"]);return e!==void 0&&c!=null&&s(e,["labels"],c),t}function Dl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["source"]);r!=null&&Ul(r,t);const l=i(e,["config"]);return l!=null&&wl(l,t),t}function kl(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>il(r))),s(e,["generatedMasks"],o)}return e}function Ul(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],$(r));const l=i(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],Ml(l)),t}function Ht(n){const e={},t=i(n,["languageCode"]);t!=null&&s(e,["languageCode"],t);const o=i(n,["voiceConfig"]);if(o!=null&&s(e,["voiceConfig"],o),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Ll(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Gr(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],o),e}function Fl(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],dl(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],cl(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function Bt(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Vr(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearchRetrieval"]);r!=null&&s(e,["googleSearchRetrieval"],r);const l=i(n,["computerUse"]);if(l!=null&&s(e,["computerUse"],l),i(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=i(n,["enterpriseWebSearch"]);u!=null&&s(e,["enterpriseWebSearch"],u);const c=i(n,["googleMaps"]);c!=null&&s(e,["googleMaps"],c);const d=i(n,["googleSearch"]);d!=null&&s(e,["googleSearch"],d);const f=i(n,["urlContext"]);return f!=null&&s(e,["urlContext"],f),e}function Gl(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Vl(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function ql(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function bl(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function Hl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],M(n,o));const r=i(e,["config"]);return r!=null&&ql(r,t),t}function Bl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["config"]);return r!=null&&bl(r,t),t}function Jl(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&s(e,["parameters","safetySetting"],r);const l=i(n,["personGeneration"]);e!==void 0&&l!=null&&s(e,["parameters","personGeneration"],l);const a=i(n,["includeRaiReason"]);e!==void 0&&a!=null&&s(e,["parameters","includeRaiReason"],a);const u=i(n,["outputMimeType"]);e!==void 0&&u!=null&&s(e,["parameters","outputOptions","mimeType"],u);const c=i(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&s(e,["parameters","outputOptions","compressionQuality"],c);const d=i(n,["enhanceInputImage"]);e!==void 0&&d!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=i(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=i(n,["labels"]);e!==void 0&&p!=null&&s(e,["labels"],p);const m=i(n,["numberOfImages"]);e!==void 0&&m!=null&&s(e,["parameters","sampleCount"],m);const g=i(n,["mode"]);return e!==void 0&&g!=null&&s(e,["parameters","mode"],g),t}function $l(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],$(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&Jl(a,t),t}function Kl(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ve(l))),s(e,["generatedImages"],r)}return e}function Yl(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["encodedVideo"]);o!=null&&s(e,["videoBytes"],Q(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Wl(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],Q(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function zl(n){const e={},t=i(n,["image"]);t!=null&&s(e,["_self"],$(t));const o=i(n,["maskMode"]);return o!=null&&s(e,["maskMode"],o),e}function Xl(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],Se(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function Ql(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],$(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function Jt(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["encodedVideo"],Q(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["encoding"],r),e}function $t(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],Q(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}const Zl="Content-Type",Ol="X-Server-Timeout",jl="User-Agent",Le="x-goog-api-client",ea="1.30.0",na=`google-genai-sdk/${ea}`,ta="v1beta1",oa="v1beta",mt=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ia{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:ta,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:oa,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,a=l.signal;if(t.timeout&&t?.timeout>0){const u=setTimeout(()=>l.abort(),t.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=a}return t&&t.extraBody!==null&&sa(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ht(r),new Me(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ht(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return ee(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:c}=yield U(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,y=m.code,T=`got status: ${g}. ${JSON.stringify(p)}`;if(y>=400&&y<600)throw new _e({message:T,status:y})}}catch(p){if(p.name==="ApiError")throw p}a+=d;let f=a.match(mt);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield U(new Me(m)),a=a.slice(f[0].length),f=a.match(mt)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=na+" "+this.clientOptions.userAgentExtra;return e[jl]=t,e[Le]=t,e[Zl]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(Ol,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const u=(o=t?.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=C("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,t?.httpOptions);return l.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,a=await l.stat(t),u=String(a.size),c=(r=o?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(t),p={};o?.customMetadata&&(p.customMetadata=o.customMetadata),o?.chunkingConfig&&(p.chunkingConfig=o.chunkingConfig);const m=await this.fetchUploadUrl(d,u,c,f,p,o?.httpOptions);return l.uploadToFileSearchStore(t,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,a){var u;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d?.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function ht(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new _e({message:r,status:t}):new Error(r)}}function sa(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(t,e);n.body=JSON.stringify(r)}const ra="mcp_used/unknown";let la=!1;function Kt(n){for(const e of n)if(aa(e)||typeof e=="object"&&"inputSchema"in e)return!0;return la}function Yt(n){var e;const t=(e=n[Le])!==null&&e!==void 0?e:"";n[Le]=(t+` ${ra}`).trimStart()}function aa(n){return n!==null&&typeof n=="object"&&n instanceof $e}function ua(n,e=100){return ee(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield U(n.listTools({cursor:o}));for(const a of l.tools)yield yield U(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class $e{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new $e(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,c=(t=void 0,ue(ua(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){t={error:p}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ni(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}async function da(n,e,t){const o=new Wo;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class ca{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=ma(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(_=>{d=_}),p=e.callbacks,m=function(){d({})},g=this.apiClient,y={onopen:m,onmessage:_=>{da(g,p.onmessage,_)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(_){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(_){}},T=this.webSocketFactory.create(c,pa(a),y);T.connect(),await f;const E={setup:{model:M(this.apiClient,e.model)}};return T.send(JSON.stringify(E)),new fa(T,this.apiClient)}}class fa{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Os(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Zs(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(O.PLAY)}pause(){this.sendPlaybackControl(O.PAUSE)}stop(){this.sendPlaybackControl(O.STOP)}resetContext(){this.sendPlaybackControl(O.RESET_CONTEXT)}close(){this.conn.close()}}function pa(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function ma(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}const ha="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ga(n,e,t){const o=new Yo;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=nr(l);Object.assign(o,a)}else Object.assign(o,l);e(o)}class ya{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new ca(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Kt(e.config.tools)&&Yt(p);const m=Ea(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const A=this.apiClient.getApiKey();let w="BidiGenerateContent",F="key";A?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),w="BidiGenerateContentConstrained",F="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${w}?${F}=${A}`}let g=()=>{};const y=new Promise(A=>{g=A}),T=e.callbacks,v=function(){var A;(A=T?.onopen)===null||A===void 0||A.call(T),g({})},S=this.apiClient,E={onopen:v,onmessage:A=>{ga(S,T.onmessage,A)},onerror:(t=T?.onerror)!==null&&t!==void 0?t:function(A){},onclose:(o=T?.onclose)!==null&&o!==void 0?o:function(A){}},_=this.webSocketFactory.create(f,_a(m),E);_.connect(),await y;let x=M(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&x.startsWith("publishers/")){const A=this.apiClient.getProject(),w=this.apiClient.getLocation();x=`projects/${A}/locations/${w}/`+x}let R={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ge.AUDIO]}:e.config.responseModalities=[ge.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],P=[];for(const A of N)if(this.isCallableTool(A)){const w=A;P.push(await w.tool())}else P.push(A);P.length>0&&(e.config.tools=P);const G={model:x,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=Qs(this.apiClient,G):R=Xs(this.apiClient,G),delete R.config,_.send(JSON.stringify(R)),new Ca(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ta={turnComplete:!0};class Ca{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=J(t.turns),e.isVertexAI()||(o=o.map(r=>Ee(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(ha)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Ta),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:er(e)}:t={realtimeInput:js(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function _a(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Ea(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}const gt=10;function yt(n){var e,t,o;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n?.tools)!==null&&t!==void 0?t:[])if(ne(a)){r=!0;break}if(!r)return!0;const l=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ne(n){return"callTool"in n&&typeof n.callTool=="function"}function va(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>ne(r)))!==null&&o!==void 0?o:!1}function Tt(n){var e;const t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(ne(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function Ct(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class Sa extends z{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,u;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!va(t)||yt(t.config))return await this.generateContentInternal(c);const d=Tt(t);if(d.length>0){const T=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,p;const m=J(c.contents),g=(l=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:gt;let y=0;for(;y<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,v=[];for(const S of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(ne(S)){const _=await S.callTool(f.functionCalls);v.push(..._)}y++,p={role:"user",parts:v},c.contents=J(c.contents),c.contents.push(T),c.contents.push(p),Ct(c.config)&&(m.push(T),m.push(p))}return Ct(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async t=>{var o,r,l,a,u;if(this.maybeMoveToResponseJsonSchem(t),yt(t.config)){const p=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(p)}const c=Tt(t);if(c.length>0){const p=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(l=(r=(o=t?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,f=(u=(a=t?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o?.generatedImages)for(const c of o.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c?.safetyAttributes:a.push(c);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Z(Y.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,a,u,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((a=(l=t.source)===null||l===void 0?void 0:l.video)===null||a===void 0)&&a.uri&&(!((c=(u=t.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async c=>ne(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&Kt(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Yt(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(ne(a)){const u=a,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:gt;let a=!1,u=0;const c=await this.initAfcToolsMap(e);return(function(d,f,p){var m,g;return ee(this,arguments,function*(){for(var y,T,v,S;u<l;){a&&(u++,a=!1);const R=yield U(d.processParamsMaybeAddMcpUsage(p)),N=yield U(d.generateContentStreamInternal(R)),P=[],G=[];try{for(var E=!0,_=(T=void 0,ue(N)),x;x=yield U(_.next()),y=x.done,!y;E=!0){S=x.value,E=!1;const A=S;if(yield yield U(A),A.candidates&&(!((m=A.candidates[0])===null||m===void 0)&&m.content)){G.push(A.candidates[0].content);for(const w of(g=A.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<l&&w.functionCall){if(!w.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(w.functionCall.name)){const F=yield U(f.get(w.functionCall.name).callTool([w.functionCall]));P.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${w.functionCall.name}`)}}}}catch(A){T={error:A}}finally{try{!E&&!y&&(v=_.return)&&(yield U(v.call(_)))}finally{if(T)throw T.error}}if(P.length>0){a=!0;const A=new ae;A.candidates=[{content:{role:"user",parts:P}}],yield yield U(A);const w=[];w.push(...G),w.push({role:"user",parts:P});const F=J(p.contents).concat(w);p.contents=F}else break}})})(this,c,e)}async generateContentInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ct(this.apiClient,e);return u=C("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=pt(f),m=new ae;return Object.assign(m,p),m})}else{const d=dt(this.apiClient,e);return u=C("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ft(f),m=new ae;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ct(this.apiClient,e);return u=C("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return ee(this,arguments,function*(){var m,g,y,T;try{for(var v=!0,S=ue(p),E;E=yield U(S.next()),m=E.done,!m;v=!0){T=E.value,v=!1;const _=T,x=pt(yield U(_.json()));x.sdkHttpResponse={headers:_.headers};const R=new ae;Object.assign(R,x),yield yield U(R)}}catch(_){g={error:_}}finally{try{!v&&!m&&(y=S.return)&&(yield U(y.call(S)))}finally{if(g)throw g.error}}})})}else{const d=dt(this.apiClient,e);return u=C("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return ee(this,arguments,function*(){var m,g,y,T;try{for(var v=!0,S=ue(p),E;E=yield U(S.next()),m=E.done,!m;v=!0){T=E.value,v=!1;const _=T,x=ft(yield U(_.json()));x.sdkHttpResponse={headers:_.headers};const R=new ae;Object.assign(R,x),yield yield U(R)}}catch(_){g={error:_}}finally{try{!v&&!m&&(y=S.return)&&(yield U(y.call(S)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=wr(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=kr(f),m=new zn;return Object.assign(m,p),m})}else{const d=Mr(this.apiClient,e);return u=C("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Dr(f),m=new zn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=$r(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Yr(f),m=new Xn;return Object.assign(m,p),m})}else{const d=Jr(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Kr(f),m=new Xn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=xr(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Rr(c),f=new Lo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=$l(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Kl(c),f=new Fo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Al(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=xl(c),f=new Go;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Dl(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=kl(c),f=new Vo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ul(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const d=al(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ke(f))}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Tl(this.apiClient,e);return u=C("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=_l(f),m=new Qn;return Object.assign(m,p),m})}else{const d=yl(this.apiClient,e);return u=C("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Cl(f),m=new Qn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Bl(this.apiClient,e);return u=C("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const d=Hl(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ke(f))}}async delete(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=vr(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ir(f),m=new Zn;return Object.assign(m,p),m})}else{const d=Er(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Sr(f),m=new Zn;return Object.assign(m,p),m})}}async countTokens(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Tr(this.apiClient,e);return u=C("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=_r(f),m=new On;return Object.assign(m,p),m})}else{const d=yr(this.apiClient,e);return u=C("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Cr(f),m=new On;return Object.assign(m,p),m})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=dr(this.apiClient,e);return l=C("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=cr(c),f=new qo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Or(this.apiClient,e);return u=C("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Qr(f),m=new ye;return Object.assign(m,p),m})}else{const d=Zr(this.apiClient,e);return u=C("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Xr(f),m=new ye;return Object.assign(m,p),m})}}}class Ia extends z{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Po(e);return u=C("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const d=No(e);return u=C("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Eo(e);return l=C("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function Aa(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function xa(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>La(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ra(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const u=i(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],Ua(n,u));const c=i(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&s(t,["fieldMask"],c),o}function Na(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Ra(n,o,t)),t}function Pa(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ma(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wa(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function Da(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function ka(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Je(p));const m=i(n,["thinkingConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","thinkingConfig"],m);const g=i(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=i(n,["systemInstruction"]);e!==void 0&&y!=null&&s(e,["setup","systemInstruction"],xa(b(y)));const T=i(n,["tools"]);if(e!==void 0&&T!=null){let N=ie(T);Array.isArray(N)&&(N=N.map(P=>Ga(oe(P)))),s(e,["setup","tools"],N)}const v=i(n,["sessionResumption"]);e!==void 0&&v!=null&&s(e,["setup","sessionResumption"],Fa(v));const S=i(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","inputAudioTranscription"],S);const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],E);const _=i(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&s(e,["setup","realtimeInputConfig"],_);const x=i(n,["contextWindowCompression"]);e!==void 0&&x!=null&&s(e,["setup","contextWindowCompression"],x);const R=i(n,["proactivity"]);return e!==void 0&&R!=null&&s(e,["setup","proactivity"],R),t}function Ua(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],M(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ka(r,t)),t}function La(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Pa(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],Ma(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],Aa(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function Fa(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ga(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],wa(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],Da(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function Va(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function qa(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=Va(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];l&&c.push(l),u.length>0&&c.push(...u),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class ba extends z{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Na(this.apiClient,e);l=C("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const c=qa(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function Ha(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["displayName"],o),t}function Ba(n){const e={},t=i(n,["config"]);return t!=null&&Ha(t,e),e}function Ja(n,e){const t={},o=i(n,["force"]);return e!==void 0&&o!=null&&s(e,["_query","force"],o),t}function $a(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&Ja(o,e),e}function Ka(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function Ya(n,e){const t={},o=i(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["customMetadata"],l)}const r=i(n,["chunkingConfig"]);return e!==void 0&&r!=null&&s(e,["chunkingConfig"],r),t}function Wa(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Xa(a)),e}function za(n){const e={},t=i(n,["fileSearchStoreName"]);t!=null&&s(e,["_url","file_search_store_name"],t);const o=i(n,["fileName"]);o!=null&&s(e,["fileName"],o);const r=i(n,["config"]);return r!=null&&Ya(r,e),e}function Xa(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["parent"]);o!=null&&s(e,["parent"],o);const r=i(n,["documentName"]);return r!=null&&s(e,["documentName"],r),e}function Qa(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Za(n){const e={},t=i(n,["config"]);return t!=null&&Qa(t,e),e}function Oa(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["fileSearchStores"],l)}return e}function ja(n,e){const t={},o=i(n,["mimeType"]);e!==void 0&&o!=null&&s(e,["mimeType"],o);const r=i(n,["displayName"]);e!==void 0&&r!=null&&s(e,["displayName"],r);const l=i(n,["customMetadata"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>c)),s(e,["customMetadata"],u)}const a=i(n,["chunkingConfig"]);return e!==void 0&&a!=null&&s(e,["chunkingConfig"],a),t}function eu(n){const e={},t=i(n,["fileSearchStoreName"]);t!=null&&s(e,["_url","file_search_store_name"],t);const o=i(n,["config"]);return o!=null&&ja(o,e),e}function nu(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function tu(n,e){const t={},o=i(n,["force"]);return e!==void 0&&o!=null&&s(e,["_query","force"],o),t}function ou(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&tu(o,e),e}function iu(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function su(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ru(n){const e={},t=i(n,["parent"]);t!=null&&s(e,["_url","parent"],t);const o=i(n,["config"]);return o!=null&&su(o,e),e}function lu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["documents"],l)}return e}class au extends z{constructor(e){super(),this.apiClient=e,this.list=async t=>new Z(Y.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iu(e);return l=C("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ou(e);r=C("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ru(e);return l=C("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=lu(c),f=new bo;return Object.assign(f,d),f})}}}class uu extends z{constructor(e,t=new au(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new Z(Y.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ba(e);return l=C("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ka(e);return l=C("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$a(e);r=C("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Za(e);return l=C("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Oa(c),f=new Ho;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eu(e);return l=C("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=nu(c),f=new Bo;return Object.assign(f,d),f})}}async importFile(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=za(e);return l=C("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Wa(c),f=new Ve;return Object.assign(f,d),f})}}}function du(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function cu(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function fu(n,e,t){const o={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=i(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&s(e,["displayName"],r),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(n,["epochCount"]);e!==void 0&&l!=null&&s(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(n,["learningRateMultiplier"]);if(a!=null&&s(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(n,["batchSize"]);e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","batchSize"],u);const c=i(n,["learningRate"]);if(e!==void 0&&c!=null&&s(e,["tuningTask","hyperparameters","learningRate"],c),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function pu(n,e,t){const o={};let r=i(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=i(n,["validationDataset"]);e!==void 0&&g!=null&&s(e,["supervisedTuningSpec"],_t(g))}else if(r==="PREFERENCE_TUNING"){const g=i(n,["validationDataset"]);e!==void 0&&g!=null&&s(e,["preferenceOptimizationSpec"],_t(g))}const l=i(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&s(e,["tunedModelDisplayName"],l);const a=i(n,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);let u=i(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=i(n,["epochCount"]);e!==void 0&&g!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=i(n,["epochCount"]);e!==void 0&&g!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=i(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=i(n,["learningRateMultiplier"]);e!==void 0&&g!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=i(n,["learningRateMultiplier"]);e!==void 0&&g!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=i(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=i(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=i(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&s(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=i(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=i(n,["adapterSize"]);e!==void 0&&g!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=i(n,["adapterSize"]);e!==void 0&&g!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(n,["labels"]);e!==void 0&&p!=null&&s(e,["labels"],p);const m=i(n,["beta"]);return e!==void 0&&m!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function mu(n,e){const t={},o=i(n,["baseModel"]);o!=null&&s(t,["baseModel"],o);const r=i(n,["preTunedModel"]);r!=null&&s(t,["preTunedModel"],r);const l=i(n,["trainingDataset"]);l!=null&&Au(l);const a=i(n,["config"]);return a!=null&&fu(a,t),t}function hu(n,e){const t={},o=i(n,["baseModel"]);o!=null&&s(t,["baseModel"],o);const r=i(n,["preTunedModel"]);r!=null&&s(t,["preTunedModel"],r);const l=i(n,["trainingDataset"]);l!=null&&xu(l,t,e);const a=i(n,["config"]);return a!=null&&pu(a,t,e),t}function gu(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function yu(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function Tu(n,e,t){const o={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),o}function Cu(n,e,t){const o={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),o}function _u(n,e){const t={},o=i(n,["config"]);return o!=null&&Tu(o,t),t}function Eu(n,e){const t={},o=i(n,["config"]);return o!=null&&Cu(o,t),t}function vu(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["nextPageToken"]);r!=null&&s(t,["nextPageToken"],r);const l=i(n,["tunedModels"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Wt(u))),s(t,["tuningJobs"],a)}return t}function Su(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["nextPageToken"]);r!=null&&s(t,["nextPageToken"],r);const l=i(n,["tuningJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Fe(u))),s(t,["tuningJobs"],a)}return t}function Iu(n,e){const t={},o=i(n,["name"]);o!=null&&s(t,["model"],o);const r=i(n,["name"]);return r!=null&&s(t,["endpoint"],r),t}function Au(n,e){const t={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),s(t,["examples","examples"],r)}return t}function xu(n,e,t){const o={};let r=i(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=i(n,["gcsUri"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=i(n,["gcsUri"]);e!==void 0&&a!=null&&s(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let l=i(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const a=i(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(l==="PREFERENCE_TUNING"){const a=i(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&s(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Wt(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["name"]);r!=null&&s(t,["name"],r);const l=i(n,["state"]);l!=null&&s(t,["state"],Nt(l));const a=i(n,["createTime"]);a!=null&&s(t,["createTime"],a);const u=i(n,["tuningTask","startTime"]);u!=null&&s(t,["startTime"],u);const c=i(n,["tuningTask","completeTime"]);c!=null&&s(t,["endTime"],c);const d=i(n,["updateTime"]);d!=null&&s(t,["updateTime"],d);const f=i(n,["description"]);f!=null&&s(t,["description"],f);const p=i(n,["baseModel"]);p!=null&&s(t,["baseModel"],p);const m=i(n,["_self"]);return m!=null&&s(t,["tunedModel"],Iu(m)),t}function Fe(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["name"]);r!=null&&s(t,["name"],r);const l=i(n,["state"]);l!=null&&s(t,["state"],Nt(l));const a=i(n,["createTime"]);a!=null&&s(t,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(t,["startTime"],u);const c=i(n,["endTime"]);c!=null&&s(t,["endTime"],c);const d=i(n,["updateTime"]);d!=null&&s(t,["updateTime"],d);const f=i(n,["error"]);f!=null&&s(t,["error"],f);const p=i(n,["description"]);p!=null&&s(t,["description"],p);const m=i(n,["baseModel"]);m!=null&&s(t,["baseModel"],m);const g=i(n,["tunedModel"]);g!=null&&s(t,["tunedModel"],g);const y=i(n,["preTunedModel"]);y!=null&&s(t,["preTunedModel"],y);const T=i(n,["supervisedTuningSpec"]);T!=null&&s(t,["supervisedTuningSpec"],T);const v=i(n,["preferenceOptimizationSpec"]);v!=null&&s(t,["preferenceOptimizationSpec"],v);const S=i(n,["tuningDataStats"]);S!=null&&s(t,["tuningDataStats"],S);const E=i(n,["encryptionSpec"]);E!=null&&s(t,["encryptionSpec"],E);const _=i(n,["partnerModelTuningSpec"]);_!=null&&s(t,["partnerModelTuningSpec"],_);const x=i(n,["customBaseModel"]);x!=null&&s(t,["customBaseModel"],x);const R=i(n,["experiment"]);R!=null&&s(t,["experiment"],R);const N=i(n,["labels"]);N!=null&&s(t,["labels"],N);const P=i(n,["outputUri"]);P!=null&&s(t,["outputUri"],P);const G=i(n,["pipelineJob"]);G!=null&&s(t,["pipelineJob"],G);const A=i(n,["serviceAccount"]);A!=null&&s(t,["serviceAccount"],A);const w=i(n,["tunedModelDisplayName"]);w!=null&&s(t,["tunedModelDisplayName"],w);const F=i(n,["veoTuningSpec"]);return F!=null&&s(t,["veoTuningSpec"],F),t}function Ru(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["name"]);r!=null&&s(t,["name"],r);const l=i(n,["metadata"]);l!=null&&s(t,["metadata"],l);const a=i(n,["done"]);a!=null&&s(t,["done"],a);const u=i(n,["error"]);return u!=null&&s(t,["error"],u),t}function _t(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return r!=null&&s(t,["validationDatasetUri"],r),t}class Nu extends z{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Z(Y.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:Pe.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=yu(e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Fe(f))}else{const d=gu(e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Wt(f))}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Eu(e);return u=C("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Su(f),m=new jn;return Object.assign(m,p),m})}else{const d=_u(e);return u=C("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=vu(f),m=new jn;return Object.assign(m,p),m})}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const c=cu(e);a=C("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=du(e);a=C("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=hu(e,e);return l=C("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Fe(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mu(e);return l=C("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Ru(c))}}}class Pu{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Mu=1024*1024*8,wu=3,Du=1e3,ku=2,Ce="x-goog-upload-status";async function Uu(n,e,t){var o;const r=await zt(n,e,t),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ce])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Lu(n,e,t){var o;const r=await zt(n,e,t),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ce])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=vt(l),u=new qe;return Object.assign(u,a),u}async function zt(n,e,t){var o,r;let l=0,a=0,u=new Me(new Response),c="upload";for(l=n.size;a<l;){const d=Math.min(Mu,l-a),f=n.slice(a,a+d);a+d>=l&&(c+=", finalize");let p=0,m=Du;for(;p<wu&&(u=await t.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((o=u?.headers)===null||o===void 0)&&o[Ce]));)p++,await Gu(m),m=m*ku;if(a+=d,((r=u?.headers)===null||r===void 0?void 0:r[Ce])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Fu(n){return{size:n.size,type:n.type}}function Gu(n){return new Promise(e=>setTimeout(e,n))}class Vu{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Uu(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Lu(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Fu(e)}}class qu{create(e,t,o){return new bu(e,t,o)}}class bu{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Et="x-goog-api-key";class Hu{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Et)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Et,this.apiKey)}}}const Bu="gl-node/";class Ju{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Co(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new Hu(this.apiKey);this.apiClient=new ia({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Bu+"web",uploader:new Vu,downloader:new Pu}),this.models=new Sa(this.apiClient),this.live=new ya(this.apiClient,r,new qu),this.batches=new zi(this.apiClient),this.chats=new Ps(this.models,this.apiClient),this.caches=new xs(this.apiClient),this.files=new qs(this.apiClient),this.operations=new Ia(this.apiClient),this.authTokens=new ba(this.apiClient),this.tunings=new Nu(this.apiClient),this.fileSearchStores=new uu(this.apiClient)}}const $u="AIzaSyDfe3Hqsd51HTDNFfE8954BHWoD5Sk5ftw",te=new Ju({apiKey:$u}),Ku={suggestedColor:"#FF5733",designDescription:"Desain modern dengan sentuhan geometris dan palet warna hangat, cocok untuk gaya streetwear urban.",texturePattern:"https://picsum.photos/512/512?random=1"},Yu=async n=>{if(!te)return console.warn("No API Key found. Returning mock data."),await new Promise(e=>setTimeout(e,1500)),Ku;try{const e=new Promise((p,m)=>setTimeout(()=>m(new Error("AI request timeout")),15e3)),t=te.models.generateContent({model:"gemini-2.5-flash",contents:`You are a professional fashion textile designer. Create a realistic fabric design based on this request:

USER REQUEST: "${n}"

IMPORTANT INSTRUCTIONS:
1. Extract the EXACT fabric type, color, and pattern mentioned in the user's request
2. If user mentions specific color (e.g., "hitam", "putih", "navy blue"), use that EXACT color
3. If user mentions specific pattern (e.g., "geometric", "batik", "stripes"), use that EXACT pattern
4. The design MUST match what the user explicitly requested

Return JSON with:
- suggestedColor: Hex code matching user's color request (or complementary if not specified)
- designDescription: Indonesian description (2 sentences) explaining the fabric type, color, and pattern that matches user's request
- texturePattern: Choose ONE keyword that BEST MATCHES user's request from these options:
  * "jersey-knit" (for plain t-shirt fabric, cotton jersey)
  * "batik-modern" (for batik patterns, Indonesian traditional)
  * "stripes" (for striped patterns, lines)
  * "floral" (for flower patterns, botanical)
  * "geometric" (for geometric shapes, abstract patterns)
  * "plain" (for solid color only, no pattern)
  * "denim" (for jeans texture, denim fabric)
  * "cotton" (for plain cotton weave texture)

EXAMPLES:
- "T-shirt hitam dengan motif geometric" â†’ suggestedColor: "#000000", texturePattern: "geometric"
- "Hoodie putih polos" â†’ suggestedColor: "#FFFFFF", texturePattern: "plain"
- "Kaos navy blue dengan pattern batik" â†’ suggestedColor: "#000080", texturePattern: "batik-modern"`,config:{responseMimeType:"application/json",responseSchema:{type:q.OBJECT,properties:{suggestedColor:{type:q.STRING},designDescription:{type:q.STRING},texturePattern:{type:q.STRING,description:"MUST be one of: jersey-knit, batik-modern, stripes, floral, geometric, plain, denim, cotton"}}}}}),o=await Promise.race([t,e]),r=JSON.parse(o.text||"{}");console.log("[AI Response]",r);const l=n.toLowerCase(),u=/motif|pattern|pola|garis|strip|bunga|floral|batik|geometr|texture|tekstur|print|cetakan/i.test(l);!u&&r.texturePattern&&r.texturePattern!=="plain"&&(console.log("[Pattern Override]","User tidak request pattern, forcing plain color"),r.texturePattern="plain");const c={geometric:"/textures/hexagons.svg",geometry:"/textures/hexagons.svg",abstract:"/textures/hexagons.svg",floral:"/textures/moroccan-flower-dark.png",flower:"/textures/moroccan-flower-dark.png",bunga:"/textures/moroccan-flower-dark.png",stripes:"/textures/stripes.svg",stripe:"/textures/stripes.svg",garis:"/textures/stripes.svg","jersey-knit":"/textures/fabric.svg",jersey:"/textures/fabric.svg",knit:"/textures/fabric.svg",cotton:"/textures/cotton.svg",katun:"/textures/cotton.svg",denim:"/textures/denim.svg",jeans:"/textures/denim.svg","batik-modern":"/textures/batik.svg",batik:"/textures/batik.svg",plain:null,polos:null,solid:null},d=(r.texturePattern||"plain").toLowerCase().trim();let f=c[d];if(f===void 0){const p=Object.keys(c).find(m=>d.includes(m)||m.includes(d));f=p?c[p]:null}return console.log("[Pattern Matching]",{aiReturned:d,userWantsPattern:u,matchedTexture:f||"solid color only"}),{suggestedColor:r.suggestedColor||"#ffffff",designDescription:r.designDescription||"Desain kustom berdasarkan permintaan.",texturePattern:f}}catch(e){return console.error("AI Generation Error:",e),{suggestedColor:"#1f2937",designDescription:`Gagal generate AI (${e.message||"timeout"}). Coba prompt lebih sederhana atau refresh halaman.`,texturePattern:null}}},Wu=async n=>{if(!te)return await new Promise(e=>setTimeout(e,2e3)),{suggestedColor:"#3B82F6",designDescription:"Dianalisis dari gambar referensi (Mode Demo): Gaya minimalis dengan aksen biru.",texturePattern:null};try{const e=new FileReader,o=await new Promise(d=>{e.onloadend=()=>d(e.result),e.readAsDataURL(n)}),r=await te.models.generateContent({model:"gemini-2.5-flash",contents:[{parts:[{text:`Analyze this fashion design reference image. Extract:
1. Dominant color (hex code)
2. Design style and description (Indonesian, 2-3 sentences)
3. Pattern type (keywords: jersey-knit, batik-modern, stripes, floral, geometric, plain, denim, cotton)

Return JSON format.`},{inlineData:{mimeType:n.type,data:o.split(",")[1]}}]}],config:{responseMimeType:"application/json",responseSchema:{type:q.OBJECT,properties:{suggestedColor:{type:q.STRING},designDescription:{type:q.STRING},texturePattern:{type:q.STRING}}}}}),l=JSON.parse(r.text||"{}"),a={"jersey-knit":"https://images.unsplash.com/photo-1558769132-cb1aea1f3f69?w=512&h=512&fit=crop","batik-modern":"https://images.unsplash.com/photo-1610701596007-11502861dcfa?w=512&h=512&fit=crop",stripes:"https://images.unsplash.com/photo-1562137369-1a1a0bc66744?w=512&h=512&fit=crop",floral:"https://images.unsplash.com/photo-1604695573706-53170668f6a6?w=512&h=512&fit=crop",geometric:"https://images.unsplash.com/photo-1557672172-298e090bd0f1?w=512&h=512&fit=crop",plain:null,denim:"https://images.unsplash.com/photo-1582552938357-32b906df40cb?w=512&h=512&fit=crop",cotton:"https://images.unsplash.com/photo-1616486029423-aaa4789e8c9a?w=512&h=512&fit=crop"},u=(l.texturePattern||"plain").toLowerCase(),c=Object.keys(a).find(d=>u.includes(d));return{suggestedColor:l.suggestedColor||"#3B82F6",designDescription:l.designDescription||"Dianalisis dari gambar referensi.",texturePattern:c?a[c]:null}}catch(e){return console.error("Image analysis error:",e),{suggestedColor:"#3B82F6",designDescription:"Gagal menganalisis gambar. Gunakan prompt teks untuk hasil optimal.",texturePattern:null}}},zu=async(n,e)=>{if(!te)return await new Promise(t=>setTimeout(t,1e3)),"Halo! Saya adalah asisten desain Clo Vsual (Mode Demo). Saya bisa memberikan saran tentang tren warna, kain, dan gaya untuk proyek fashion Anda.";try{return(await te.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:"You are a helpful fashion design assistant for Clo Vsual. You speak primarily in Indonesian. You help designers, students, and garment factories with ideas."},history:n.map(r=>({role:r.role==="assistant"?"model":"user",parts:[{text:r.content}]}))}).sendMessage({message:e})).text||"Maaf, saya tidak dapat menghasilkan respon saat ini."}catch(t){return console.error("Chat Error:",t),"Maaf, saya sedang mengalami gangguan koneksi. Silakan coba lagi nanti."}},Xu=L.lazy(()=>to(()=>import("./ThreeDViewer-C9YliY1w.js"),__vite__mapDeps([0,1,2,3]))),nd=()=>{const e=no().state,t=()=>({projectName:e?.name||"Untitled Project",garmentType:e?.type||e?.project?.garmentType||fe.TSHIRT,color:"#3b82f6",textureUrl:null,description:e?.project?.description||"",fit:"Regular",textureScale:8,customModelUrl:null}),[o,r]=L.useState([t()]),[l,a]=L.useState(0),u=o[l],c=L.useRef(u);L.useEffect(()=>{c.current=u},[u]);const[d,f]=L.useState(""),[p,m]=L.useState(!1),[g,y]=L.useState(""),[T,v]=L.useState(!1),[S,E]=L.useState(!0),[_,x]=L.useState("stylized"),[R,N]=L.useState(!1),[P,G]=L.useState("three-quarter"),[A,w]=L.useState(!1),[F,k]=L.useState(""),[H,re]=L.useState([{role:"assistant",content:`Halo! Saya asisten desain AI Clo Visual. Saya bisa bantu Anda membuat desain yang lebih realistis!

Contoh prompt bagus:
â€¢ "T-shirt jersey cotton putih dengan pattern geometric minimalis hitam"
â€¢ "Hoodie fleece navy blue dengan print batik modern gold"
â€¢ "Dress linen soft pink dengan motif floral vintage"

Ada yang ingin Anda buat?`}]),[de,B]=L.useState(!1),[le,Ke]=L.useState(!1),Ie=L.useRef(null),K=I=>{const D=o.slice(0,l+1);D.push(I),r(D),a(D.length-1)},Ye=()=>{l>0&&a(l-1)},Ae=()=>{l<o.length-1&&a(l+1)};L.useEffect(()=>{const I=D=>{(D.ctrlKey||D.metaKey)&&D.key==="z"?(D.shiftKey?Ae():Ye(),D.preventDefault()):(D.ctrlKey||D.metaKey)&&D.key==="y"&&(Ae(),D.preventDefault())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[l,o.length]);const Xt=async()=>{if(d.trim()){m(!0),E(!0),y("ðŸ¤– AI analyzing your prompt..."),setTimeout(()=>y("ðŸŽ¨ Selecting optimal color palette..."),700),setTimeout(()=>y("ðŸ§µ Generating fabric pattern..."),1400),setTimeout(()=>y("âœ¨ Applying realistic textures..."),2100);try{const I=await Yu(d);y("ðŸŽ¯ Finalizing design...");const V={...c.current,color:I.suggestedColor,textureUrl:I.texturePattern,description:I.designDescription};K(V),y("âœ… Design created successfully!"),setTimeout(()=>E(!1),500)}catch{y("âŒ Failed to generate design"),E(!1)}finally{m(!1),setTimeout(()=>y(""),3500)}}},Qt=async I=>{if(I.target.files&&I.target.files[0]){const D=I.target.files[0];m(!0),E(!0),y("ðŸ“¸ Analyzing reference image..."),setTimeout(()=>y("ðŸ” Extracting design elements..."),600),setTimeout(()=>y("ðŸŽ¨ Mapping colors and patterns..."),1200);try{const V=await Wu(D),eo={...c.current,color:V.suggestedColor,textureUrl:V.texturePattern,description:V.designDescription};K(eo),y("âœ… Design applied from image!"),setTimeout(()=>E(!1),500)}catch{y("âŒ Failed to process image"),E(!1)}finally{m(!1),setTimeout(()=>y(""),3500)}}},Zt=I=>{if(I.target.files&&I.target.files[0]){const D=I.target.files[0],V=URL.createObjectURL(D);K({...u,customModelUrl:V}),y(`Model ${D.name} dimuat!`),setTimeout(()=>y(""),3e3)}},Ot=I=>{const V={...c.current,garmentType:I.garmentType,color:I.color,textureUrl:I.textureUrl,description:I.description,fit:I.fit,projectName:I.name};K(V),y(`Template "${I.name}" diterapkan!`),setTimeout(()=>y(""),3e3)},jt=async I=>{if(I.preventDefault(),!F.trim())return;const D=F;k(""),re(ce=>[...ce,{role:"user",content:D}]),B(!0);const V=await zu(H,D);re(ce=>[...ce,{role:"assistant",content:V}]),B(!1)},We=I=>{if(I==="png")if(Ie.current)try{const D=Ie.current.toDataURL("image/png"),V=document.createElement("a");V.download=`${u.projectName.replace(/\s+/g,"_")}_design.png`,V.href=D,V.click(),y("Gambar berhasil didownload!"),setTimeout(()=>y(""),3e3)}catch(D){console.error("Screenshot failed:",D),alert("Gagal mengambil screenshot. Pastikan browser mendukung.")}else alert("Canvas belum siap untuk diekspor.");else alert(`Fitur Export GLB akan mengemas scene 3D saat ini ke file .glb.

TODO: Implementasi GLTFExporter dari Three.js di sini.`)};return h.jsxs("div",{className:"flex h-[calc(100vh-64px)] overflow-hidden bg-gray-100",children:[h.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col overflow-y-auto",children:[h.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Designer Tools"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:Ye,disabled:l===0,className:"p-1.5 rounded-md hover:bg-gray-100 disabled:opacity-30 disabled:hover:bg-transparent text-gray-600 transition-colors",title:"Undo (Ctrl+Z)",children:h.jsx(uo,{className:"h-4 w-4"})}),h.jsx("button",{onClick:Ae,disabled:l===o.length-1,className:"p-1.5 rounded-md hover:bg-gray-100 disabled:opacity-30 disabled:hover:bg-transparent text-gray-600 transition-colors",title:"Redo (Ctrl+Y)",children:h.jsx(ro,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsxs("div",{className:"bg-gradient-to-r from-slate-600 to-slate-700 rounded-lg p-4 text-white",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Re,{className:"h-5 w-5"}),h.jsx("h3",{className:"font-bold",children:"Quick Start"})]}),h.jsx("p",{className:"text-sm opacity-90 mb-3",children:"Hemat waktu! Pilih dari 30+ template siap pakai"}),h.jsxs("button",{onClick:()=>Ke(!0),className:"w-full bg-white text-slate-700 py-2 px-4 rounded-md font-medium hover:bg-slate-50 transition-colors flex items-center justify-center gap-2",children:[h.jsx(Re,{className:"h-4 w-4"}),"Buka Template Library"]})]}),h.jsx("div",{className:"border-t border-gray-100 my-4"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi Teks (Prompt AI)"}),h.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:["Hoodie oversized hitam dengan print minimalis","T-shirt putih dengan motif batik modern","Dress linen beige dengan pattern floral vintage"].map((I,D)=>h.jsxs("button",{onClick:()=>f(I),className:"text-xs px-2 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-md transition-colors",title:"Klik untuk gunakan prompt ini",children:["âœ¨ ",I.substring(0,25),"..."]},D))}),h.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-md text-sm focus:ring-slate-500 focus:border-slate-500",rows:4,placeholder:"Contoh: 'Hoodie fleece navy blue dengan graphic print urban streetwear, style oversized dengan detail kangaroo pocket'",value:d,onChange:I=>f(I.target.value)}),h.jsxs("div",{className:"mt-1 text-xs text-gray-500 bg-blue-50 p-2 rounded border border-blue-100",children:["ðŸ’¡ ",h.jsx("strong",{children:"Tips AI Maksimal:"})," Semakin detail prompt, semakin realistis hasilnya. Sebutkan material, warna spesifik, dan style pattern."]}),h.jsxs("button",{onClick:Xt,disabled:p,className:`mt-2 w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${p?"bg-slate-400":"bg-slate-600 hover:bg-slate-700"}`,children:[h.jsx(fo,{className:"h-4 w-4 mr-2"}),p?"Generating...":"Generate Design"]})]}),h.jsx("div",{className:"border-t border-gray-100 my-4"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referensi Gambar"}),h.jsx("div",{className:"flex items-center justify-center w-full",children:h.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[h.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[h.jsx(co,{className:"w-8 h-8 mb-2 text-gray-400"}),h.jsx("p",{className:"text-xs text-gray-500",children:"Click to upload sketch/photo"})]}),h.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Qt})]})})]}),h.jsx("div",{className:"border-t border-gray-100 my-4"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model 3D (.glb)"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("label",{className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[h.jsx(ze,{className:"h-4 w-4 mr-2"}),u.customModelUrl?"Ganti Model":"Upload Model",h.jsx("input",{type:"file",className:"hidden",accept:".glb,.gltf",onChange:Zt})]}),u.customModelUrl&&h.jsx("button",{onClick:()=>K({...u,customModelUrl:null}),className:"p-2 text-red-500 hover:bg-red-50 rounded",title:"Hapus Model",children:h.jsx(xe,{className:"h-4 w-4"})})]}),u.customModelUrl&&h.jsx("p",{className:"mt-1 text-xs text-green-600",children:"Model kustom aktif"})]}),h.jsx("div",{className:"border-t border-gray-100 my-4"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pengaturan Dasar"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-gray-500",children:"Warna Dasar"}),h.jsxs("div",{className:"flex gap-2 mt-1",children:[h.jsx("input",{type:"color",value:u.color,onChange:I=>K({...u,color:I.target.value}),className:"h-8 w-12 p-0 border-0 rounded cursor-pointer"}),h.jsx("div",{className:"text-sm py-1 px-2 bg-gray-100 rounded text-gray-600 uppercase",children:u.color})]})]}),!u.customModelUrl&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-gray-500",children:"Tipe Pakaian"}),h.jsxs("select",{value:u.garmentType,onChange:I=>K({...u,garmentType:I.target.value}),className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",children:[h.jsx("option",{value:fe.TSHIRT,children:"T-Shirt"}),h.jsx("option",{value:fe.HOODIE,children:"Hoodie"}),h.jsx("option",{value:fe.DRESS,children:"Dress"})]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-gray-500",children:"Ukuran / Fit (Scale)"}),h.jsxs("select",{value:u.fit,onChange:I=>K({...u,fit:I.target.value}),className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",children:[h.jsx("option",{value:"Regular",children:"Regular Fit"}),h.jsx("option",{value:"Slim",children:"Slim Fit"}),h.jsx("option",{value:"Oversized",children:"Oversized / Baggy"})]})]}),u.textureUrl&&h.jsxs("div",{className:"pt-2 border-t border-dashed border-gray-200",children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("span",{className:"text-xs text-gray-500",children:"Skala Motif"}),h.jsxs("span",{className:"text-xs text-gray-900",children:[u.textureScale,"x"]})]}),h.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:u.textureScale,onChange:I=>K({...u,textureScale:parseFloat(I.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-slate-600"})]}),h.jsx("div",{className:"pt-2 border-t border-dashed border-gray-200",children:h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:R,onChange:I=>N(I.target.checked),className:"w-4 h-4 text-slate-600 rounded"}),h.jsx("span",{className:"text-xs text-gray-600",children:"Wireframe (Debug)"})]})})]})]}),h.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-br from-slate-50 to-gray-50 rounded-lg border border-slate-200",children:[h.jsx("h4",{className:"text-xs font-bold text-slate-800 mb-2",children:"âš¡ Tips Designer Pro:"}),h.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[h.jsxs("li",{children:["ðŸŽ¯ ",h.jsx("strong",{children:"Pemula?"})," Gunakan Template Library di atas!"]}),h.jsx("li",{children:"âœï¸ Prompt detail = hasil lebih realistis"}),h.jsx("li",{children:"ðŸ“ Atur skala motif 2-4x untuk proporsi natural"}),h.jsx("li",{children:"ðŸ‘” Pilih fit sesuai style (Slim/Oversized)"}),h.jsx("li",{children:"ðŸ“¦ Upload .glb untuk custom 3D model"})]})]})]})]}),h.jsxs("div",{className:"flex-1 flex flex-col relative bg-gray-200",children:[h.jsxs("div",{className:"flex-1 p-6 flex flex-col gap-4 h-full",children:[h.jsxs("div",{className:"h-24 bg-white rounded-lg p-3 shadow-sm flex items-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 rounded bg-gray-100 border border-gray-200 overflow-hidden flex-shrink-0",children:u.textureUrl?h.jsx("img",{src:u.textureUrl,alt:"Generated Pattern",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400 text-center",children:"No Texture"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"AI Generated Output"}),h.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:u.description||"Belum ada desain yang digenerate. Gunakan panel kiri untuk mulai."})]})]}),h.jsxs("div",{className:"flex-1 min-h-0 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative",children:[h.jsxs("div",{className:"absolute top-4 left-4 z-10 flex gap-2",children:[h.jsx("button",{onClick:()=>x(_==="stylized"?"realistic":"stylized"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all shadow-lg backdrop-blur-md ${_==="realistic"?"bg-blue-600 text-white":"bg-white/90 text-gray-700 hover:bg-white"}`,title:`Switch to ${_==="stylized"?"Realistic":"Stylized"} Mode`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ze,{className:"w-4 h-4"}),_==="realistic"?"Realistic":"Stylized"]})}),h.jsx("button",{onClick:()=>v(!T),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all shadow-lg backdrop-blur-md ${T?"bg-slate-600 text-white":"bg-white/90 text-gray-700 hover:bg-white"}`,title:"Toggle Auto Rotate",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),T?"On":"Off"]})})]}),h.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 flex gap-2 bg-white/90 backdrop-blur-md rounded-lg p-2 shadow-lg",children:[h.jsx("button",{onClick:()=>G("front"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${P==="front"?"bg-slate-600 text-white shadow-md":"bg-transparent text-gray-700 hover:bg-gray-100"}`,title:"Front View",children:"Front"}),h.jsx("button",{onClick:()=>G("three-quarter"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${P==="three-quarter"?"bg-slate-600 text-white shadow-md":"bg-transparent text-gray-700 hover:bg-gray-100"}`,title:"3/4 View",children:"3/4"}),h.jsx("button",{onClick:()=>G("back"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${P==="back"?"bg-slate-600 text-white shadow-md":"bg-transparent text-gray-700 hover:bg-gray-100"}`,title:"Back View",children:"Back"})]}),S&&h.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-20 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-slate-600 mb-3"}),h.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Loading 3D Model..."})]})}),h.jsx(L.Suspense,{fallback:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-gray-500",children:"Memuat viewer 3D..."}),children:h.jsx(Xu,{ref:Ie,color:u.color,textureUrl:u.textureUrl,garmentType:u.garmentType,fit:u.fit,textureScale:u.textureScale,customModelUrl:u.customModelUrl,autoRotate:T,onLoadComplete:()=>E(!1),viewMode:_,wireframe:R,cameraPreset:P})}),g&&h.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black/70 text-white px-6 py-3 rounded-full text-sm font-medium backdrop-blur-md animate-pulse z-30",children:g})]})]}),h.jsx("button",{onClick:()=>w(!A),className:"absolute bottom-6 right-6 bg-slate-600 text-white p-3 rounded-full shadow-lg hover:bg-slate-700 transition-colors z-20",children:A?h.jsx(xe,{className:"h-6 w-6"}):h.jsx(so,{className:"h-6 w-6"})}),A&&h.jsxs("div",{className:"absolute bottom-20 right-6 w-80 bg-white rounded-xl shadow-xl border border-gray-200 flex flex-col h-96 z-20",children:[h.jsx("div",{className:"p-3 border-b bg-slate-50 rounded-t-xl flex justify-between items-center",children:h.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Asisten Desain AI"})}),h.jsxs("div",{className:"flex-1 p-3 overflow-y-auto space-y-3 bg-gray-50",children:[H.map((I,D)=>h.jsx("div",{className:`flex ${I.role==="user"?"justify-end":"justify-start"}`,children:h.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm ${I.role==="user"?"bg-slate-600 text-white":"bg-white text-gray-800 border border-gray-200"}`,children:I.content})},D)),de&&h.jsx("div",{className:"text-xs text-gray-400 italic",children:"Asisten sedang mengetik..."})]}),h.jsxs("form",{onSubmit:jt,className:"p-2 border-t bg-white rounded-b-xl flex gap-2",children:[h.jsx("input",{type:"text",value:F,onChange:I=>k(I.target.value),placeholder:"Tanya ide desain...",className:"flex-1 text-sm border border-gray-300 rounded-md px-2 py-1 focus:ring-slate-500 focus:border-slate-500"}),h.jsx("button",{type:"submit",className:"bg-gray-100 hover:bg-gray-200 p-2 rounded-md text-gray-600",children:h.jsx(ao,{className:"h-4 w-4"})})]})]})]}),h.jsxs("div",{className:"w-72 bg-white border-l border-gray-200 p-4 flex flex-col",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Detail Proyek"}),h.jsxs("div",{className:"space-y-4 mb-auto",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nama Proyek"}),h.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:u.projectName})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Jenis"}),h.jsx("p",{className:"text-sm text-gray-900 mt-1",children:u.customModelUrl?"Custom Model":u.garmentType})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Fit"}),h.jsx("p",{className:"text-sm text-gray-900 mt-1",children:u.fit})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Catatan"}),h.jsx("textarea",{className:"mt-1 w-full text-sm border-gray-300 rounded-md shadow-sm border p-2 h-24",placeholder:"Tambahkan catatan teknis..."})]})]}),h.jsxs("div",{className:"space-y-3 pt-6 border-t border-gray-200",children:[h.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:()=>alert("Project saved to local state."),children:[h.jsx(lo,{className:"h-4 w-4 mr-2"}),"Simpan Desain"]}),h.jsxs("button",{onClick:()=>We("png"),className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[h.jsx(io,{className:"h-4 w-4 mr-2"}),"Export Gambar (PNG)"]}),h.jsxs("button",{onClick:()=>We("glb"),className:"w-full flex items-center justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-800 hover:bg-gray-900",children:[h.jsx(Qu,{className:"h-4 w-4 mr-2"}),"Export 3D (GLB)"]})]})]}),h.jsx(ho,{isOpen:le,onClose:()=>Ke(!1),onSelectTemplate:Ot})]})},Qu=({className:n})=>h.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),h.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),h.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]});export{nd as default};
